<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Chatbox Nháº­n Diá»‡n Nguy Hiá»ƒm Online â€“ Mobile</title>
<style>
  body{
    margin:0; background:#eef2f7; font-family:Arial, sans-serif;
    display:flex; justify-content:center; align-items:center;
    height:100vh;
  }
  .chat-wrap{
    width:100%; max-width:430px; height:95vh;
    background:#fff; border-radius:14px;
    box-shadow:0 6px 20px rgba(0,0,0,0.15);
    display:flex; flex-direction:column; overflow:hidden;
  }
  .chat-header{
    background:#1976d2; color:#fff; padding:14px;
    text-align:center; font-weight:bold; font-size:18px;
  }
  .chat-box{
    flex:1; overflow-y:auto; padding:12px;
    background:#f8fafc;
  }
  .bot,.user{
    padding:10px 12px; border-radius:10px;
    max-width:80%; margin-bottom:10px; line-height:1.4;
    white-space:pre-wrap;
  }
  .bot{background:#e3f2fd; align-self:flex-start;}
  .user{background:#c8e6c9; align-self:flex-end;}
  .input-area{
    display:flex; padding:10px; gap:8px; background:#fff;
    border-top:1px solid #ddd;
  }
  #userInput{
    flex:1; padding:10px; border-radius:8px; border:1px solid #ccc;
  }
  button{
    padding:10px 14px; background:#1976d2; color:#fff; border:none;
    border-radius:8px; font-weight:bold;
  }
  .risk-score{
    font-size:13px; background:#fff3cd; color:#7c5a00;
    padding:4px 8px; border-radius:6px; margin-top:4px;
  }
  mark{background:#ffcccc; padding:2px; border-radius:4px;}
</style>
</head>
<body>
<div class="chat-wrap">
  <div class="chat-header">Chatbot â€“ Nháº­n Diá»‡n Nguy Hiá»ƒm Online</div>
  <div id="chatBox" class="chat-box"></div>

  <div class="input-area">
    <input id="userInput" type="text" placeholder="Nháº­p tÃ¬nh huá»‘ng..." />
    <button onclick="sendMsg()">Gá»­i</button>
</div>
<button style="margin:10px; padding:10px; width:90%; border:none; border-radius:8px; background:#0b72cc; color:#fff; font-weight:bold;" onclick="randomScenario()">ğŸ¯ Táº¡o tÃ¬nh huá»‘ng ngáº«u nhiÃªn</button>
</div>

<script>
function addUser(t){ let d=document.createElement('div'); d.className='user'; d.innerHTML=t; chatBox.appendChild(d); chatBox.scrollTop=999999; }
function addBot(t){ let d=document.createElement('div'); d.className='bot'; d.innerHTML=t; chatBox.appendChild(d); chatBox.scrollTop=999999; }

function highlight(text, keys){ let r=text; keys.forEach(k=>{ let rg=new RegExp(k,'gi'); r=r.replace(rg,`<mark>${k}</mark>`); }); return r; }

const maps=[
 {k:['gáº·p','háº¹n gáº·p','gáº·p máº·t'],cat:'meet'},
 {k:['áº£nh riÃªng','gá»­i áº£nh','áº£nh nháº¡y'],cat:'photos'},
 {k:['Ä‘á»‹a chá»‰','sÄ‘t','sá»‘ Ä‘iá»‡n thoáº¡i','trÆ°á»ng'],cat:'info'},
 {k:['náº¡p tháº»','chuyá»ƒn tiá»n','momo'],cat:'money'},
 {k:['quÃ ','trÃºng thÆ°á»Ÿng'],cat:'gift'},
 {k:['otp','mÃ£ xÃ¡c'],cat:'otp'},
 {k:['Ä‘e doáº¡','báº¯t cÃ³c'],cat:'kidnap'},
];

const reply={
 meet:"KhÃ´ng gáº·p ngÆ°á»i láº¡ ngoÃ i Ä‘á»i nhÃ©!",
 photos:"KhÃ´ng gá»­i áº£nh riÃªng tÆ° cho báº¥t ká»³ ai.",
 info:"KhÃ´ng chia sáº» thÃ´ng tin cÃ¡ nhÃ¢n!",
 money:"KhÃ´ng náº¡p tháº» hay chuyá»ƒn tiá»n!",
 gift:"QuÃ  miá»…n phÃ­ online thÆ°á»ng lÃ  báº«y.",
 otp:"KhÃ´ng chia sáº» mÃ£ OTP!",
 kidnap:"Dá»«ng ngay vÃ  bÃ¡o ngÆ°á»i lá»›n!",
 unknown:"Báº¡n mÃ´ táº£ rÃµ hÆ¡n giÃºp mÃ¬nh nhÃ©."
};

function score(cat){ const lvl={meet:7,photos:6,info:8,money:6,gift:5,otp:9,kidnap:10,unknown:2}; return lvl[cat]||1; }

function analyze(m){ m=m.toLowerCase(); let cat='unknown', keys=[];
  maps.forEach(mp=>{ mp.k.forEach(k=>{ if(m.includes(k)){ cat=mp.cat; keys.push(k);} });});
  return{cat, keys, reply:reply[cat], risk:score(cat)};
}

let totalScore = 0;
let answerCount = 0;

function sendMsg(){ const t=userInput.value.trim(); if(!t)return;
  addUser(t); userInput.value='';
  const r=analyze(t);
  addBot(`${r.reply}<br>ğŸ‘‰ Tá»« khÃ³a: ${highlight(t,r.keys)}<br><span class='risk-score'>Má»©c nguy hiá»ƒm: ${r.risk}/10</span>`);
  totalScore += r.risk;
  answerCount++;}<br>ğŸ‘‰ Tá»« khÃ³a: ${highlight(t,r.keys)}<br><span class='risk-score'>Má»©c nguy hiá»ƒm: ${r.risk}/10</span>`);
}

addBot('Xin chÃ o! HÃ£y nháº­p tÃ¬nh huá»‘ng Ä‘á»ƒ mÃ¬nh phÃ¢n tÃ­ch nhÃ©.');

// Táº¡o tÃ¬nh huá»‘ng ngáº«u nhiÃªn
const sampleScenarios = [
  "Má»™t ngÆ°á»i láº¡ yÃªu cáº§u em gá»­i áº£nh riÃªng tÆ°.",
  "Báº¡n online rá»§ em gáº·p ngoÃ i quÃ¡n cafe.",
  "Em nháº­n Ä‘Æ°á»£c link nháº­n quÃ  iPhone 15.",
  "Má»™t ngÆ°á»i tá»± xÆ°ng lÃ  tháº§y giÃ¡o xin mÃ£ OTP.",
  "Ai Ä‘Ã³ Ä‘e dá»a sáº½ báº¯t cÃ³c náº¿u em khÃ´ng tráº£ lá»i.",
  "Há» xin Ä‘á»‹a chá»‰ nhÃ  Ä‘á»ƒ gá»­i quÃ .",
  "NgÆ°á»i láº¡ báº£o em chuyá»ƒn tiá»n Ä‘á»ƒ nháº­n há»c bá»•ng.",
  "Má»™t tÃ i khoáº£n láº¡ muá»‘n biáº¿t trÆ°á»ng vÃ  lá»›p cá»§a em.",
  "Báº¡n online kÃªu em báº­t camera Ä‘á»ƒ xÃ¡c minh.",
  "Má»™t ngÆ°á»i láº¡ nhá» em náº¡p tháº» há»™ vÃ¬ Ä‘ang gáº¥p.",
  "Má»™t ngÆ°á»i nháº¥n máº¡nh ráº±ng em pháº£i giá»¯ bÃ­ máº­t cuá»™c trÃ² chuyá»‡n.",
  "Há» báº£o em xoÃ¡ lá»‹ch sá»­ chat sau khi nÃ³i chuyá»‡n.",
  "Má»™t ngÆ°á»i láº¡ xin lá»‹ch trÃ¬nh Ä‘i há»c â€“ giá» tan há»c.",
  "Ai Ä‘Ã³ gá»­i file .apk báº£o em cÃ i Ä‘á»ƒ nháº­n quÃ .",
  "Má»™t tÃ i khoáº£n láº¡ há»i em Ä‘ang á»Ÿ Ä‘Ã¢u lÃºc nÃ y.",
  "NgÆ°á»i quen online xin máº­t kháº©u tÃ i khoáº£n game.",
  "Má»™t ngÆ°á»i dáº·n em Ä‘á»«ng nÃ³i vá»›i ba máº¹ vá» cuá»™c trÃ² chuyá»‡n nÃ y.",
  "Em nháº­n Ä‘Æ°á»£c email yÃªu cáº§u Ä‘Äƒng nháº­p Ä‘á»ƒ trÃ¡nh bá»‹ khÃ³a tÃ i khoáº£n.",
  "Má»™t ngÆ°á»i dÃ¹ng avatar tráº» em nhÆ°ng nÃ³i chuyá»‡n nhÆ° ngÆ°á»i lá»›n.",
  "Ai Ä‘Ã³ kÃªu em ra Ä‘áº§u ngÃµ nháº­n quÃ  do há» gá»­i táº·ng."
];

function randomScenario(){
  const s = sampleScenarios[Math.floor(Math.random()*sampleScenarios.length)];
  addBot("ğŸ“Œ TÃ¬nh huá»‘ng ngáº«u nhiÃªn:<br>" + s);
}
</script>
<button style="margin:10px; padding:10px; width:90%; background:#ff9800; color:#fff; border:none; border-radius:8px; font-weight:bold;" onclick="showSummary()">ğŸ“Š Xem tá»•ng káº¿t cuá»‘i buá»•i</button>

<script>
function showSummary(){
  const avg = answerCount ? (totalScore / answerCount).toFixed(1) : 0;
  addBot(`ğŸ“Š <b>Tá»•ng káº¿t cuá»‘i buá»•i</b><br>â€¢ Sá»‘ tÃ¬nh huá»‘ng Ä‘Ã£ xá»­ lÃ½: ${answerCount}<br>â€¢ Äiá»ƒm nguy hiá»ƒm trung bÃ¬nh: ${avg}/10<br>â€¢ Nháº­n xÃ©t: ${avg > 7 ? 'âš ï¸ Má»©c nguy hiá»ƒm cao â€“ cáº§n cáº©n trá»ng hÆ¡n!' : avg > 4 ? 'ğŸ” Má»©c nguy hiá»ƒm trung bÃ¬nh â€“ báº¡n xá»­ lÃ½ khÃ¡ tá»‘t!' : 'âœ… Má»©c nguy hiá»ƒm tháº¥p â€“ báº¡n cÃ³ ká»¹ nÄƒng phÃ²ng trÃ¡nh tá»‘t!'}`);
}
</script>
</body>
</html>
